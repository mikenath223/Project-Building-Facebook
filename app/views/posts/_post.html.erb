<h1>Post</h1>
<div class="post-descript container-fluid col-12">
  <h3>Author: <%= gravatar_for post.user, size: 20 %> <%= get_user(post) %></h3>
  <p>Joined FaceBrook: <%= time_ago_in_words(post.user.created_at) %> ago </p>
  <ul>
    <li> Title: <%= post.title %></li>
    <li><%= post.content %></li>
    <li>Published <%= time_ago_in_words(post.created_at) %> ago.</li>
  </ul>
  <button type="button" class="btn btn-primary">
    <%= link_to "#{pluralize(post.likes.count, 'like')} <i class='far fa-thumbs-up'></i>".html_safe, likes_path( likeable_data(post)), method: :post, class: "badge badge-light" %>
    <% if liked?(post) %>
    <%= link_to "Unlike <i class='far fa-thumbs-down'></i>".html_safe, like_path( like_id(post) ), method: :delete, class: "badge badge-light" %>
    <% end %>
  </button> <br>

  <% if owner?(post.user) %>
  <div class="wrap-controls">
    <%= fa_icon "ellipsis-h" %> <br>
    <span class="controls">
      <p><%= link_to 'Edit', edit_post_path(post) %></p>
      <p>
        <%= link_to 'Delete',  post_path(post), method: :delete, data: { confirm: 'Are you certain you want to delete this?' } %>
      </p>
    </span>
  </div>
</div>


<% end %>
<div>
  <h3> Comments </h3>
  <% if comments?(post) %>
  <ul>
    <% post.comments.each do |c| %>
    <li class="comment-descript fadeIn">
      <span class="gravatar-comment"><%= gravatar_for c.user, size: 30 %></span>
     <b><%=  get_user(c).capitalize %></b><br>
      <%= c.content %> 
      <br>
      <button type="button" class="btn btn-primary">
        <%= link_to "#{pluralize(c.likes.count, 'like')} <i class='far fa-thumbs-up'></i>".html_safe, likes_path( likeable_data(c)), method: :post, class: "badge badge-light" %>
        <% if liked?(c) %>
        <%= link_to "Unlike <i class='far fa-thumbs-down'></i>".html_safe, like_path( like_id(c) ), method: :delete, class: "badge badge-light" %>
        <% end %>
      </button>
    <% if owner?(c.user) %>
    <div class="wrap-controls">
      <%= fa_icon "ellipsis-h" %>  <br>
      <span class="controls">
        <p><%= link_to "Update Comment", edit_comment_path(c) %></p>
        <p>
          <%= link_to "Delete comment", comment_path(c), method: :delete, data: { confirm: 'Confirm delete comment' } %>
        </p>
      </span>
    </div>
    <% end %>
    <% end %>
  </li>
  </ul>
  <% end %>
</div>
<div>
  <button type="button" class="comment-btn btn btn-primary">Add comment <%= fa_icon "comment" %> </button>
  <div class="comment-form animated fadeInDown">
    <%= form_for @comment do |f| %>
    <%= render 'shared/error_messages', object: f.object %>
    <%= f.label :content %>
    <%= f.text_area :content, class: 'form-control' %>
    <%= f.hidden_field :post_id, value: post.id %>
    <%= f.submit "Comment", class: "btn btn-success comment-btn"%>
    <% end %>
  </div>
</div>

<%= javascript_pack_tag 'custom' %>
