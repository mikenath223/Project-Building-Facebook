<%= provide(:title, 'Post') %>

<h1>Post</h1>
<h3>Created by <%= get_user(@post) %> </h3>
<ul>
  <li> Title: <%= @post.title %></li>
  <li><%= @post.content %></li>
</ul>
  <%= button_to 'Like', post_likes_path(@post), method: :post %>
  <p><%= pluralize(@post.likes.count, "like") %></p>

  <% if owner?(@post.user) %>

  <%= link_to 'Delete',  post_path(@post), method: :delete, data: { confirm: 'Are you certain you want to delete this?' } %> 
  ||
  <%= link_to 'Edit', edit_post_path(@post) %>


  <% end %>
<div> 
  <h3> Comments </h3>
  <% if has_comments?(@post) %>
    <ol>
      <% @post.comments.each do |c| %>
        <li> <%= c.content %> <br> 
        Commented by <%=  get_user(c) %>
        </li>
      <% end %>
    </ol>  
  <% end %>
</div>
<div>
  <h2>Add comments</h2>
  <%= form_for @comment do |f| %>
    <%= f.label :content %>
    <%= f.text_area :content, class: 'form-control' %>
    <%= f.hidden_field :post_id, value: @post.id %>
    <%= f.submit "Add Comment", class: "btn btn-success"%>
  <% end %>
</div>